<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸŒˆ notyourface</title>

    <style>
      body {
        background-color: #272523;
        color: #e7e1d3;
        font-family: sans-serif;
        font-size: 16px;
        padding: 16px;
        line-height: 1.6em;
      }

      a:any-link {
        color: skyblue;
      }

      h1 {
        margin-top: 0;
      }

      h2 {
        margin-top: 40px;
        margin-bottom: 12px;
      }

      h3 {
        margin-top: 32px;
        margin-bottom: 0px;
      }

      p {
        margin: 12px 0;
      }

      code {
        background-color: rgba(128, 128, 128, 0.25);
        padding: 2px 4px;
        border-radius: 3px;
      }

      hr {
        width: 100%;
        border-top: 1px solid #fff1;
      }

      #playground {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: flex-start;
        gap: 12px;
        padding: 12px 24px;
        background-color: #fff1;
        border-radius: 4px;
      }

      #playground .form-item {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        column-gap: 24px;
        row-gap: 2px;
        align-items: center;
      }

      #playground .form-item > label {
        flex: 0 160px;
        font-weight: bold;
      }

      #playground .form-item > input,
      #playground .form-item > select {
        flex: 0 200px;
      }

      #playground .form-item > code {
        flex: 8 120px;
        font-family: monospace;
      }

      #playground #pg-imgs {
        display: flex;
        gap: 24px;
      }

      .avt-gallery {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
      }

      img:nth-child(2n) {
        border-radius: 50%;
      }

      img:nth-child(3n) {
        border-radius: 25%;
      }
    </style>
  </head>
  <body>
    <h1>ðŸŒˆ notyourface</h1>

    <p>Deterministically generated avatar images. Pretty, simple and lightweight.</p>
    <p style="font-size: larger">
      Go to <a href="https://github.com/bkis/notyourface">github.com/bkis/notyourface</a>
      for usage instructions!
    </p>
    <p>
      All avatar images are square-shaped. Round images don't exist.<br />
      The round(ed) ones are simply styled with <code>border-radius: 50%</code> or
      <code>border-radius: 25%</code>.
    </p>

    <h2>Playground</h2>
    <div id="playground">
      <div class="form-item">
        <label for="palette">Palette</label>
        <select name="palette" id="palette" value="null">
          <option value="null" selected>Random!</option>
          <option value='["#640D5F", "#D91656", "#EB5B00", "#FFB200"]'>Sunset</option>
          <option value='["#294B29", "#50623A", "#789461", "#DBE7C9"]'>Forest</option>
          <option value='["#FF2DD1", "#FDFFB8", "#4DFFBE", "#63C8FF"]'>Candy</option>
          <option value='["#F8F6E3", "#97E7E1", "#6AD4DD", "#7AA2E3"]'>Sky</option>
          <option value='["#E4E0E1", "#D6C0B3", "#AB886D", "#493628"]'>Coffee</option>
          <option value='["#11224E", "#F87B1B", "#CBD99B", "#EEEEEE"]'>Retro</option>
        </select>
        <code id="palette-v"></code>
      </div>
      <div class="form-item">
        <label for="shapes">Shapes</label>
        <select name="shapes" id="shapes" value="null">
          <option value="null" selected>All of them!</option>
          <option value='["circle"]'>Circles only</option>
          <option value='["square"]'>Squares only</option>
        </select>
        <code id="shapes-v"></code>
      </div>
      <div class="form-item">
        <label for="size">Size</label>
        <input type="range" id="size" name="size" min="50" max="300" step="50" value="200" />
        <code id="size-v"></code>
      </div>
      <div class="form-item">
        <label for="complexity">Complexity</label>
        <input type="range" id="complexity" name="complexity" min="1" max="10" value="4" />
        <code id="complexity-v"></code>
      </div>
      <hr />
      <div id="pg-imgs">
        <img id="pg-img-1" src="" />
        <img id="pg-img-2" src="" />
        <img id="pg-img-3" src="" />
      </div>
    </div>

    <h2>Examples</h2>

    <script type="module">
      import nyf from './src/notyourface.ts';

      //// regenerate example avatar image every second ////

      const applyOptions = () => {
        // collect options from UI
        const options = Object.fromEntries(
          ['size', 'palette', 'shapes', 'complexity'].map((o) => [
            o,
            document.getElementById(o).value,
          ])
        );
        Object.entries(options).forEach((o) => {
          // JSON-parse value in options object
          options[o[0]] = JSON.parse(o[1]);
          // display value in UI
          document.getElementById(`${o[0]}-v`).innerText =
            options[o[0]] == null ? 'undefined' : o[1];
        });
        // generate avatar image and apply to img elements
        Array.from(Array(3).keys())
          .map((i) => document.getElementById(`pg-img-${i + 1}`))
          .forEach((img) => {
            img.src = nyf.dataURI(options);
          });
      };

      applyOptions();
      setInterval(applyOptions, 750);

      //// generate controlled example avatar gallery ////

      const size = 100;

      const addAvatarGallery = (heading, description, seeds, options) => {
        // heading
        const h3 = document.createElement('h3');
        h3.innerText = heading;
        document.body.appendChild(h3);
        // description
        const p = document.createElement('p');
        p.innerHTML = description;
        document.body.appendChild(p);
        // avatar gallery
        const gallery = document.createElement('p');
        gallery.classList.add('avt-gallery');
        document.body.appendChild(gallery);
        // avatars
        seeds.forEach((seed, i) =>
          gallery.appendChild(
            nyf.imgEl(
              { seed, ...options },
              {
                title: `${heading} #${i + 1} â€“ SEED: ${seed ?? 'random'}`,
                alt: `${heading} #${i + 1}`,
              }
            )
          )
        );
      };

      addAvatarGallery(
        'Seeded with fixed color palette',
        `Seeded avatars with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#134686', '#ED3F27', '#FEB21A', '#FDF4E3'],
          cache: 0,
        }
      );

      addAvatarGallery(
        'Random with fixed color palette',
        `Random avatars with a custom color palette.
        These will look different each time (as there is no seed input),
        but the colors palette used stays the same.`,
        Array.from(Array(10).keys()).map((_) => undefined),
        {
          size,
          palette: ['#004030', '#4A9782', '#DCD0A8', '#FFF9E5'],
          cache: 0,
        }
      );

      addAvatarGallery(
        'Seeded with random color palette',
        `Seeded avatars with a random color palette.
        These will look exactly the same as long as the seeds don\'t change.
        The color palette is random but stable because it's bound to the respective seed.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          cache: 0,
        }
      );

      addAvatarGallery(
        'Unseeded with random color palette',
        `Random avatars with a random color palette.
        These will look completely different each time they are created.`,
        Array.from(Array(10).keys()).map((_) => undefined),
        {
          size,
          cache: 0,
        }
      );

      addAvatarGallery(
        'Low complexity, seeded with fixed color palette',
        `Low complexity (2) seeded avatars with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#F0E491', '#BBC863', '#658C58', '#31694E'],
          cache: 0,
          complexity: 2,
        }
      );

      addAvatarGallery(
        'High complexity, seeded with random color palette',
        `High complexity (10) seeded avatars with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          cache: 0,
          complexity: 10,
        }
      );

      addAvatarGallery(
        'Only circles, seeded with fixed color palette',
        `Seeded avatars made exclusively of circles with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#1A2A4F', '#F7A5A5', '#FFDBB6', '#FFF2EF'],
          shapes: ['circle'],
          cache: 0,
        }
      );

      addAvatarGallery(
        'Only squares, seeded with fixed color palette',
        `Seeded avatars made exclusively of squares with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#F25912', '#5C3E94', '#412B6B', '#211832'],
          shapes: ['square'],
          cache: 0,
        }
      );
    </script>
  </body>
</html>

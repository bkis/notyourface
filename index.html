<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸŒˆ notyourface</title>

    <style>
      :root {
        --bg: #222;
        --accent-bg: #2b2b2b;
        --text: #dcdcdc;
        --text-light: #ababab;
        --accent: #9a83ff;
        --accent-hover: #baaaff;
        --accent-text: var(--bg);
        --code: #ddd4ff;
        --preformatted: #ccc;
        --disabled: #111;
        --border: #fff2;
      }

      ::selection {
        color: #000;
        background: #fff;
      }

      html {
        font-family:
          -apple-system, BlinkMacSystemFont, 'Avenir Next', Avenir, 'Nimbus Sans L', Roboto,
          'Noto Sans', 'Segoe UI', Arial, Helvetica, 'Helvetica Neue', sans-serif;
        background-color: #222;
        color: #ffe;
        font-size: 18px;
      }

      body {
        display: block;
        max-width: 1200px;
        margin: 0 auto;
        padding: 1rem;
      }

      body > header {
        background-color: #fff2;
        padding: 1rem 1rem 2.5rem 1rem;
        border-radius: 4px;
        border-bottom: 1px solid #fff1;
        text-align: center;
      }

      body > footer {
        margin-top: 2rem;
        padding: 1rem 1rem 2.5rem 1rem;
        border-top: 1px solid #fff1;
        text-align: center;
      }

      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-weight: normal;
        margin-top: 1.5rem;
        margin-bottom: 0.8rem;
      }

      a:any-link {
        color: var(--accent);
        text-decoration: none;
      }

      a:hover {
        text-decoration: underline;
      }

      p {
        margin: 0.8rem 0;
      }

      code {
        background-color: #fff1;
        padding: 0 4px;
        border-radius: 3px;
      }

      textarea,
      select,
      input,
      button,
      .button {
        margin-bottom: 0;
        padding: 0 4px;
      }

      #playground {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: flex-start;
        gap: 12px;
        padding: 24px;
        background-color: #fff1;
        border-radius: 4px;
      }

      #playground .form-item {
        width: 100%;
        display: flex;
        flex-wrap: wrap;
        column-gap: 24px;
        row-gap: 4px;
        align-items: center;
      }

      #playground .form-item > label {
        flex: 0 160px;
        font-weight: bold;
      }

      #playground .form-item > input,
      #playground .form-item > select {
        flex: 0 200px;
      }

      #playground .form-item > code {
        font-family: monospace;
      }

      #pg-imgs {
        width: 100%;
        margin: 1.5rem 0 0.5rem;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-evenly;
        gap: 24px;
      }

      #pg-imgs img {
        max-width: 30vw;
      }

      .avt-gallery {
        display: flex;
        flex-wrap: wrap;
        gap: 16px;
      }

      img:nth-child(2n) {
        border-radius: 50%;
      }

      img:nth-child(3n) {
        border-radius: 25%;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>ðŸŒˆ notyourface</h1>
      <p>Deterministically generated avatar images. Pretty, simple and lightweight.</p>
      <div>
        For technical details and usage instructions, visit<br />
        <img src="https://logohub.dev/api/v1/logos/github?color=ffffff" height="18" width="18" />
        <a href="https://github.com/bkis/notyourface" style="font-size: larger"
          >github.com/bkis/notyourface</a
        >
      </div>
    </header>

    <main id="main">
      <h2>Playground</h2>
      <div id="playground">
        <div class="form-item">
          <label for="palette">Palette</label>
          <select name="palette" id="palette" value="null">
            <option value="null" selected>Random!</option>
            <option value='["#640D5F", "#D91656", "#EB5B00", "#FFB200"]'>Sunset</option>
            <option value='["#294B29", "#50623A", "#789461", "#DBE7C9"]'>Forest</option>
            <option value='["#FF2DD1", "#FDFFB8", "#4DFFBE", "#63C8FF"]'>Candy</option>
            <option value='["#F8F6E3", "#97E7E1", "#6AD4DD", "#7AA2E3"]'>Sky</option>
            <option value='["#E4E0E1", "#D6C0B3", "#AB886D", "#493628"]'>Coffee</option>
            <option value='["#11224E", "#F87B1B", "#CBD99B", "#EEEEEE"]'>Retro</option>
          </select>
          <code id="palette-v"></code>
        </div>
        <div class="form-item">
          <label for="shapes">Shapes</label>
          <select name="shapes" id="shapes" value="null">
            <option value="null" selected>All of them!</option>
            <option value='["circle"]'>Circles only</option>
            <option value='["square"]'>Squares only</option>
          </select>
          <code id="shapes-v"></code>
        </div>
        <div class="form-item">
          <label for="size">Size</label>
          <input type="range" id="size" name="size" min="50" max="360" step="10" value="200" />
          <code id="size-v"></code>
        </div>
        <div class="form-item">
          <label for="complexity">Complexity</label>
          <input type="range" id="complexity" name="complexity" min="1" max="10" value="4" />
          <code id="complexity-v"></code>
        </div>

        <div id="pg-imgs">
          <img id="pg-img-1" src="" />
          <img id="pg-img-2" src="" />
          <img id="pg-img-3" src="" />
        </div>
      </div>

      <h2>Examples, curated with love</h2>
    </main>

    <footer>
      <div>
        For technical details and usage instructions, visit
        <a href="https://github.com/bkis/notyourface">github.com/bkis/notyourface</a>
      </div>
    </footer>

    <script type="module">
      import nyf from './src/notyourface.ts';

      //// regenerate example avatar image every second ////

      const applyOptions = () => {
        // collect options from UI
        const options = Object.fromEntries(
          ['size', 'palette', 'shapes', 'complexity'].map((o) => [
            o,
            document.getElementById(o).value,
          ])
        );
        Object.entries(options).forEach((o) => {
          // JSON-parse value in options object
          options[o[0]] = JSON.parse(o[1]);
          // display value in UI
          document.getElementById(`${o[0]}-v`).innerText =
            options[o[0]] == null ? 'undefined' : o[1];
        });
        // generate avatar image and apply to img elements
        Array.from(Array(3).keys())
          .map((i) => document.getElementById(`pg-img-${i + 1}`))
          .forEach((img) => {
            img.src = nyf.dataURI({ cache: 0, ...options });
          });
      };

      applyOptions();
      setInterval(applyOptions, 750);

      //// generate controlled example avatar gallery ////

      const size = 100;

      const addAvatarGallery = (heading, description, seeds, options) => {
        const main = document.getElementById('main');
        // heading
        const h3 = document.createElement('h3');
        h3.innerText = heading;
        main.appendChild(h3);
        // description
        const p = document.createElement('p');
        p.innerHTML = description;
        main.appendChild(p);
        // avatar gallery
        const gallery = document.createElement('p');
        gallery.classList.add('avt-gallery');
        main.appendChild(gallery);
        // avatars
        seeds.forEach((seed, i) =>
          gallery.appendChild(
            nyf.imgEl(
              { seed, ...options },
              {
                title: `${heading} #${i + 1} â€“ SEED: ${seed ?? 'random'}`,
                alt: `${heading} #${i + 1}`,
              }
            )
          )
        );
      };

      addAvatarGallery(
        'Seeded with fixed color palette',
        `Seeded avatars with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#134686', '#ED3F27', '#FEB21A', '#FDF4E3'],
          cache: 0,
        }
      );

      addAvatarGallery(
        'Random with fixed color palette',
        `Random avatars with a custom color palette.
        These will look different each time (as there is no seed input),
        but the colors palette used stays the same.`,
        Array.from(Array(10).keys()).map((_) => undefined),
        {
          size,
          palette: ['#004030', '#4A9782', '#DCD0A8', '#FFF9E5'],
          cache: 0,
        }
      );

      addAvatarGallery(
        'Seeded with random color palette',
        `Seeded avatars with a random color palette.
        These will look exactly the same as long as the seeds don\'t change.
        The color palette is random but stable because it's bound to the respective seed.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          cache: 0,
        }
      );

      addAvatarGallery(
        'Unseeded with random color palette',
        `Random avatars with a random color palette.
        These will look completely different each time they are created.`,
        Array.from(Array(10).keys()).map((_) => undefined),
        {
          size,
          cache: 0,
        }
      );

      addAvatarGallery(
        'Low complexity, seeded with fixed color palette',
        `Low complexity (2) seeded avatars with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#F0E491', '#BBC863', '#658C58', '#31694E'],
          cache: 0,
          complexity: 2,
        }
      );

      addAvatarGallery(
        'High complexity, seeded with random color palette',
        `High complexity (10) seeded avatars with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          cache: 0,
          complexity: 10,
        }
      );

      addAvatarGallery(
        'Only circles, seeded with fixed color palette',
        `Seeded avatars made exclusively of circles with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#1A2A4F', '#F7A5A5', '#FFDBB6', '#FFF2EF'],
          shapes: ['circle'],
          cache: 0,
        }
      );

      addAvatarGallery(
        'Only squares, seeded with fixed color palette',
        `Seeded avatars made exclusively of squares with a custom color palette.
        These will look exactly the same as long as the seeds don\'t change.`,
        Array.from(Array(10).keys()).map((n) => String.fromCharCode(65 + n)),
        {
          size,
          palette: ['#F25912', '#5C3E94', '#412B6B', '#211832'],
          shapes: ['square'],
          cache: 0,
        }
      );
    </script>
  </body>
</html>
